@{
    Layout = "~/Views/Shared/UserLayout.cshtml";
    ViewData["Title"] = "Strona g≈Ç√≥wna";
}

<div class="welcome-container" style="text-align: center; margin-bottom: 2rem;">
    <div class="cute-animation" style="margin-bottom:1.5rem;">
        <svg width="120" height="120" viewBox="0 0 120 120" fill="none" xmlns="http://www.w3.org/2000/svg" class="animated-book">
            <rect x="20" y="30" width="80" height="60" rx="12" fill="#e0f0ff" stroke="#4287f5" stroke-width="3"/>
            <rect x="30" y="40" width="60" height="40" rx="8" fill="#fff" stroke="#5aa6ff" stroke-width="2"/>
            <rect x="40" y="50" width="40" height="20" rx="4" fill="#f8fafc" stroke="#4287f5" stroke-width="1.5"/>
            <path d="M30 40 Q60 70 90 40" stroke="#5aa6ff" stroke-width="2" fill="none"/>
        </svg>
    </div>
    <h2 class="mb-3" style="font-size: 2rem;">üåü Witaj w Bibliotece Online! üåü</h2>
    <p class="text-muted mb-5" style="font-size: 1.1rem;">Mo≈ºesz przeglƒÖdaƒá i wypo≈ºyczaƒá ksiƒÖ≈ºki oraz zarzƒÖdzaƒá swoimi wypo≈ºyczeniami.</p>
</div>

<div class="row">
    <div class="col-md-7">
        <div class="card" style="border-radius: 25px; box-shadow: 0 4px 15px rgba(66, 135, 245, 0.1); padding: 1.5rem; margin-bottom: 2rem; border: 2px dashed #5aa6ff;">
            <h3 style="color: #4287f5; font-size: 1.5rem; margin-bottom: 1rem; display: flex; align-items: center;">
                <span class="cute-icon">üìö</span> Twoje aktywne wypo≈ºyczenia
            </h3>
            
            @if (ViewBag.ActiveBorrowings != null && ViewBag.ActiveBorrowings.Count > 0)
            {
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Tytu≈Ç ksiƒÖ≈ºki</th>
                                <th>Data wypo≈ºyczenia</th>
                                <th>Termin zwrotu</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in ViewBag.ActiveBorrowings)
                            {
                                <tr>
                                    <td>
                                        <a href="@Url.Action("Details", "Books", new { id = item.Book?.Id })" class="text-decoration-none">
                                            <strong>@(item.Book?.Title ?? "Brak tytu≈Çu")</strong>
                                        </a>
                                    </td>
                                    <td>@item.BorrowDate.ToShortDateString()</td>
                                    <td>
                                        @if(item.ReturnDate.HasValue)
                                        {
                                            <span class="@(DateTime.Now > item.ReturnDate ? "text-danger" : "")">
                                                @item.ReturnDate.Value.ToShortDateString()
                                            </span>
                                        }
                                        else
                                        {
                                            <span>-</span>
                                        }
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            }
            else
            {
                <div class="empty-state" style="text-align: center; padding: 2rem 0;">
                    <div style="font-size: 3rem; margin-bottom: 1rem;">üìñ</div>
                    <p style="color: #7a7a7a; font-size: 1.1rem;">Nie masz obecnie ≈ºadnych wypo≈ºyczonych ksiƒÖ≈ºek.</p>
                </div>
            }
            
            <a href="/Borrowings/Index" class="btn" style="background: linear-gradient(90deg, #5aa6ff 0%, #0056b3 100%); color: white; border-radius: 25px; padding: 10px 20px; font-weight: 600; margin-top: 1rem; display: inline-flex; align-items: center;">
                Wszystkie wypo≈ºyczenia <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-right ms-2" viewBox="0 0 16 16">
                  <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"/>
                </svg>
            </a>
        </div>
    </div>
    
    <div class="col-md-5">
        <div class="card" style="border-radius: 25px; box-shadow: 0 4px 15px rgba(66, 135, 245, 0.1); padding: 1.5rem; margin-bottom: 2rem; border: 2px dashed #5aa6ff;">
            <h3 style="color: #4287f5; font-size: 1.5rem; margin-bottom: 1rem; display: flex; align-items: center;">
                <span class="cute-icon">üîç</span> Ostatnio zwr√≥cone
            </h3>
            
            @if (ViewBag.RecentlyReturned != null && ViewBag.RecentlyReturned.Count > 0)
            {
                <ul class="list-group list-group-flush">
                    @foreach (var item in ViewBag.RecentlyReturned)
                    {
                        <li class="list-group-item" style="background: transparent; border-bottom: 1px solid #d1e4f7; padding: 0.75rem 0;">
                            <div style="display: flex; align-items: center;">
                                <span style="font-size: 1.2rem; margin-right: 10px;">üìï</span>
                                <div>
                                    <a href="@Url.Action("Details", "Books", new { id = item.Book?.Id })" class="text-decoration-none">
                                        <strong>@(item.Book?.Title ?? "Brak tytu≈Çu")</strong>
                                    </a>
                                    <div><small class="text-muted">Zwr√≥cono: @(item.ReturnDate.HasValue ? item.ReturnDate.Value.ToShortDateString() : "-")</small></div>
                                </div>
                            </div>
                        </li>
                    }
                </ul>
            }
            else
            {
                <div class="empty-state" style="text-align: center; padding: 2rem 0;">
                    <div style="font-size: 3rem; margin-bottom: 1rem;">üîé</div>
                    <p style="color: #7a7a7a; font-size: 1.1rem;">Nie masz jeszcze zwr√≥conych ksiƒÖ≈ºek.</p>
                </div>
            }
            
            <a href="/Borrowings/Archive" class="btn" style="background-color: #e0f0ff; color: #4287f5; border-radius: 25px; padding: 10px 20px; font-weight: 600; margin-top: 1rem; border: 1px solid #4287f5; display: inline-flex; align-items: center;">
                Zobacz archiwum <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-archive ms-2" viewBox="0 0 16 16">
                  <path d="M0 2a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1v7.5a2.5 2.5 0 0 1-2.5 2.5h-9A2.5 2.5 0 0 1 1 12.5V5a1 1 0 0 1-1-1V2zm2 3v7.5A1.5 1.5 0 0 0 3.5 14h9a1.5 1.5 0 0 0 1.5-1.5V5H2zm13-3H1v2h14V2zM5 7.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5z"/>
                </svg>
            </a>
        </div>
    </div>
</div> 